Version 4
SHEET 1 3440 3092
WIRE -272 -1616 -272 -1712
WIRE -272 -1488 -272 -1536
WIRE -160 -1488 -272 -1488
WIRE -160 -1456 -160 -1488
WIRE -272 -1424 -272 -1488
WIRE -272 -1424 -672 -1424
WIRE -272 -1376 -272 -1424
WIRE -272 -1376 -320 -1376
WIRE -160 -1360 -160 -1376
WIRE -160 -1360 -224 -1360
WIRE -160 -1344 -160 -1360
WIRE -544 -1312 -576 -1312
WIRE -224 -1312 -224 -1360
WIRE -224 -1312 -320 -1312
WIRE 256 -1296 176 -1296
WIRE 416 -1296 336 -1296
WIRE 448 -1296 416 -1296
WIRE 560 -1296 512 -1296
WIRE 592 -1296 560 -1296
WIRE 640 -1296 592 -1296
WIRE 832 -1296 704 -1296
WIRE 928 -1296 832 -1296
WIRE 944 -1296 928 -1296
WIRE -576 -1280 -576 -1312
WIRE -256 -1280 -576 -1280
WIRE 832 -1264 832 -1296
WIRE 944 -1264 944 -1296
WIRE -544 -1248 -576 -1248
WIRE -256 -1248 -256 -1280
WIRE -256 -1248 -320 -1248
WIRE 560 -1248 560 -1296
WIRE -256 -1232 -256 -1248
WIRE -160 -1232 -160 -1264
WIRE -160 -1232 -256 -1232
WIRE -576 -1216 -576 -1248
WIRE 176 -1216 176 -1296
WIRE 176 -1216 -576 -1216
WIRE -672 -1184 -672 -1424
WIRE -544 -1184 -672 -1184
WIRE -304 -1184 -320 -1184
WIRE -256 -1168 -256 -1232
WIRE 416 -1168 416 -1296
WIRE 832 -1168 832 -1200
WIRE 944 -1168 944 -1184
WIRE 944 -1168 832 -1168
WIRE 560 -1136 560 -1184
WIRE 832 -1136 832 -1168
WIRE -256 -1056 -256 -1104
WIRE 416 -1056 416 -1088
WIRE -304 -992 -304 -1184
WIRE -304 -880 -304 -928
WIRE -432 -480 -432 -576
WIRE -432 -320 -432 -400
WIRE -432 -320 -464 -320
WIRE -288 -208 -512 -208
WIRE -432 -144 -432 -320
WIRE -512 -128 -512 -208
WIRE -464 -128 -512 -128
WIRE -288 -112 -288 -208
WIRE -288 -112 -400 -112
WIRE -256 -112 -288 -112
WIRE -128 -112 -176 -112
WIRE -96 -112 -128 -112
WIRE 16 -112 -32 -112
WIRE 48 -112 16 -112
WIRE 96 -112 48 -112
WIRE 288 -112 160 -112
WIRE 384 -112 288 -112
WIRE 400 -112 384 -112
WIRE -464 -96 -688 -96
WIRE 288 -80 288 -112
WIRE 400 -80 400 -112
WIRE 16 -64 16 -112
WIRE -432 -32 -432 -80
WIRE 288 16 288 -16
WIRE 400 16 400 0
WIRE 400 16 288 16
WIRE 16 48 16 0
WIRE 288 48 288 16
WIRE -432 368 -432 272
WIRE -432 576 -432 448
WIRE -480 592 -560 592
WIRE -560 656 -560 592
WIRE -480 656 -560 656
WIRE -432 736 -432 672
WIRE -288 736 -432 736
WIRE -128 736 -208 736
WIRE -96 736 -128 736
WIRE 16 736 -32 736
WIRE 48 736 16 736
WIRE 96 736 48 736
WIRE 288 736 160 736
WIRE 384 736 288 736
WIRE 400 736 384 736
WIRE -432 768 -432 736
WIRE 288 768 288 736
WIRE 400 768 400 736
WIRE -480 784 -496 784
WIRE 16 784 16 736
WIRE -688 848 -688 -96
WIRE -560 848 -560 656
WIRE -560 848 -688 848
WIRE -496 848 -496 784
WIRE -496 848 -560 848
WIRE -480 848 -496 848
WIRE -128 864 -128 736
WIRE 288 864 288 832
WIRE 400 864 400 848
WIRE 400 864 288 864
WIRE 16 896 16 848
WIRE 288 896 288 864
WIRE -432 944 -432 864
WIRE 2128 960 1888 960
WIRE -128 976 -128 944
WIRE 2128 1040 2128 960
WIRE -1200 1152 -1200 1136
WIRE -1200 1152 -1296 1152
WIRE -1200 1168 -1200 1152
WIRE -1392 1184 -1392 1152
WIRE 2128 1184 2128 1120
WIRE -1296 1200 -1296 1152
WIRE 64 1200 -176 1200
WIRE 1312 1200 1088 1200
WIRE 1888 1264 1888 960
WIRE -1296 1312 -1296 1264
WIRE -96 1312 -96 1280
WIRE 1168 1312 1168 1280
WIRE -1200 1328 -1200 1248
WIRE -176 1328 -176 1200
WIRE -128 1328 -176 1328
WIRE 1088 1328 1088 1200
WIRE 1136 1328 1088 1328
WIRE 64 1344 64 1200
WIRE 64 1344 -64 1344
WIRE 1312 1344 1312 1200
WIRE 1312 1344 1200 1344
WIRE 1408 1344 1312 1344
WIRE 1616 1344 1408 1344
WIRE 1840 1344 1696 1344
WIRE -688 1360 -688 848
WIRE -480 1360 -688 1360
WIRE -320 1360 -400 1360
WIRE -128 1360 -320 1360
WIRE 592 1360 592 1328
WIRE 880 1360 752 1360
WIRE 1008 1360 960 1360
WIRE 1136 1360 1008 1360
WIRE 64 1376 64 1344
WIRE 224 1376 64 1376
WIRE 352 1376 304 1376
WIRE 560 1376 352 1376
WIRE 704 1392 624 1392
WIRE 752 1392 752 1360
WIRE 752 1392 704 1392
WIRE 1408 1392 1408 1344
WIRE -688 1408 -688 1360
WIRE -320 1408 -320 1360
WIRE -96 1408 -96 1376
WIRE 560 1408 528 1408
WIRE 1008 1408 1008 1360
WIRE 1168 1408 1168 1376
WIRE 1888 1408 1888 1360
WIRE 352 1424 352 1376
WIRE 592 1456 592 1424
WIRE 704 1456 704 1392
WIRE -688 1520 -688 1488
WIRE -320 1520 -320 1472
WIRE 1008 1520 1008 1472
WIRE 1408 1520 1408 1472
WIRE 352 1536 352 1488
WIRE 1888 1536 1888 1488
WIRE 528 1552 528 1408
WIRE 704 1552 704 1536
WIRE 704 1552 528 1552
WIRE 704 1584 704 1552
WIRE 704 1712 704 1664
WIRE 2128 1856 1888 1856
WIRE 2128 1936 2128 1856
WIRE 2128 2080 2128 2016
WIRE 1312 2096 1088 2096
WIRE 1888 2160 1888 1856
WIRE 1168 2208 1168 2176
WIRE 672 2224 672 2192
WIRE 1088 2224 1088 2096
WIRE 1136 2224 1088 2224
WIRE 640 2240 480 2240
WIRE 1312 2240 1312 2096
WIRE 1312 2240 1200 2240
WIRE 1408 2240 1312 2240
WIRE 1456 2240 1408 2240
WIRE 1568 2240 1536 2240
WIRE 1616 2240 1568 2240
WIRE 1840 2240 1696 2240
WIRE -224 2256 -224 2224
WIRE 96 2256 -48 2256
WIRE 832 2256 704 2256
WIRE 960 2256 912 2256
WIRE 1136 2256 960 2256
WIRE 640 2272 544 2272
WIRE 1408 2288 1408 2240
WIRE 1568 2288 1568 2240
WIRE 96 2304 96 2256
WIRE 960 2304 960 2256
WIRE 1168 2304 1168 2272
WIRE 544 2320 544 2272
WIRE 672 2320 672 2288
WIRE -48 2336 -48 2256
WIRE 1568 2400 1568 2352
WIRE -224 2416 -224 2336
WIRE 960 2416 960 2368
WIRE 1408 2416 1408 2368
WIRE 544 2448 544 2400
WIRE -48 2464 -48 2416
WIRE 96 2464 96 2384
WIRE 480 2496 480 2240
WIRE 832 2496 480 2496
WIRE 1888 2496 1888 2256
WIRE 1888 2496 912 2496
WIRE 1888 2576 1888 2496
WIRE 1888 2608 1888 2576
WIRE 96 2736 -16 2736
WIRE 1888 2736 1888 2688
WIRE -16 2800 -16 2736
WIRE 0 2800 -16 2800
WIRE 96 2800 96 2736
WIRE 96 2928 96 2880
FLAG -1200 1328 0
FLAG -1200 1136 Vcc
FLAG -688 1520 0
FLAG -320 1520 0
FLAG 352 1536 0
FLAG 1312 1200 out5
FLAG 1008 1520 0
FLAG 1168 1280 Vcc
FLAG 1888 1536 0
FLAG 2128 1184 0
FLAG 1408 1520 0
FLAG 592 1456 Vcc
FLAG 592 1328 Vss
FLAG 1168 1408 Vss
FLAG -1392 1184 0
FLAG -1392 1152 Vss
FLAG 704 1712 0
FLAG -96 1280 Vcc
FLAG -96 1408 Vss
FLAG 1168 2176 Vcc2
FLAG 1888 2736 0
FLAG 2128 2080 0
FLAG 1408 2416 0
FLAG 1568 2400 0
FLAG 1168 2304 Vss
FLAG 96 2928 0
FLAG 1888 2576 I_out
FLAG 96 2464 0
FLAG 672 2192 Vcc2
FLAG 672 2320 Vss
FLAG 544 2448 0
FLAG 960 2416 0
FLAG -224 2416 0
FLAG -224 2224 Vcc2
FLAG -1296 1312 0
FLAG -432 944 0
FLAG 16 896 0
FLAG 288 896 0
FLAG -432 272 0
FLAG -16 2880 0
FLAG -48 2464 0
FLAG 384 736 pump_out
FLAG -128 736 P
FLAG 48 736 PP
FLAG -128 976 0
FLAG 16 48 0
FLAG 288 48 0
FLAG -432 -576 0
FLAG 384 -112 pump_out2
FLAG -128 -112 P2
FLAG 48 -112 PP2
FLAG -432 -32 0
FLAG -528 -320 0
FLAG -272 -1712 0
FLAG -544 -1376 0
FLAG 560 -1136 0
FLAG 832 -1136 0
FLAG 928 -1296 pump_out3
FLAG 416 -1296 P3
FLAG 592 -1296 PP3
FLAG 416 -1056 0
FLAG -256 -1056 0
FLAG -304 -880 0
SYMBOL voltage -1200 1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -688 1392 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -62 180 Left 2
SYMATTR Value PULSE(0 3.3 0 0 0 0.015m 0.02m)
SYMATTR InstName V3
SYMBOL res -384 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 320 1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap -336 1408 R0
SYMATTR InstName C3
SYMATTR Value 47n
SYMBOL cap 336 1424 R0
SYMATTR InstName C4
SYMATTR Value 47n
SYMBOL Opamps\\ADA4891 592 1456 M180
SYMATTR InstName U4
SYMBOL res 976 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap 992 1408 R0
SYMATTR InstName C1
SYMATTR Value 47n
SYMBOL Opamps\\ADA4891 1168 1280 R0
SYMATTR InstName U1
SYMBOL nmos 1840 1264 R0
SYMATTR InstName M1
SYMATTR Value IRFH7936
SYMBOL res 1872 1392 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMATTR SpiceLine pwr=10
SYMBOL voltage 2128 1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 1392 1376 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 1712 1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 688 1440 R0
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL res 688 1568 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL Opamps\\ADA4891 -96 1280 R0
SYMATTR InstName U2
SYMBOL Opamps\\ADA4891 1168 2176 R0
SYMATTR InstName U3
SYMBOL nmos 1840 2160 R0
SYMATTR InstName M2
SYMATTR Value IRFH7936
SYMBOL res 1872 2592 R0
SYMATTR InstName R10
SYMATTR Value 1
SYMATTR SpiceLine pwr=10
SYMBOL voltage 2128 1920 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL res 1392 2272 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 1712 2224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 47
SYMBOL cap 1552 2288 R0
SYMATTR InstName C5
SYMATTR Value 10n
SYMBOL res 1552 2224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 47
SYMBOL voltage 96 2784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PWL(0 0 1m 0 1.01m 2 2m 2 2.01m 5 3m 5 7m 10 7.01m 0 8m 0 8.01m 10 8.5m 10 8.51m 0 9m 0 10m 2)
SYMBOL bv 96 2288 R0
SYMATTR InstName B2
SYMATTR Value V=10-V(I_out)
SYMBOL Opamps\\ADA4891 672 2192 R0
SYMATTR InstName U5
SYMBOL voltage 544 2304 R0
SYMATTR InstName V6
SYMATTR Value 1
SYMBOL res 928 2240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL cap 944 2304 R0
SYMATTR InstName C6
SYMATTR Value 10n
SYMBOL res 928 2480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL voltage -224 2240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 4
SYMBOL cap -1312 1200 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMATTR SpiceLine Rser=0.001
SYMBOL nmos -480 864 M180
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL pmos -480 576 R0
SYMATTR InstName M4
SYMATTR Value FDS6576
SYMBOL schottky 160 720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 0 784 R0
SYMATTR InstName D2
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 272 768 R0
SYMATTR InstName C2
SYMATTR Value 47µ
SYMBOL cap -32 720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 47µ
SYMBOL res 384 752 R0
SYMATTR InstName R6
SYMATTR Value 50
SYMBOL voltage -432 464 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 3.3
SYMBOL res -32 2784 R0
SYMATTR InstName R16
SYMATTR Value 1111
SYMBOL res -64 2320 R0
SYMATTR InstName R17
SYMATTR Value 1111
SYMBOL res -144 848 R0
SYMATTR InstName R18
SYMATTR Value 1000Meg
SYMBOL schottky 160 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 0 -64 R0
SYMATTR InstName D4
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 272 -80 R0
SYMATTR InstName C9
SYMATTR Value 47µ
SYMBOL cap -32 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 47µ
SYMBOL res 384 -96 R0
SYMATTR InstName R19
SYMATTR Value 50
SYMBOL voltage -432 -384 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 3.3
SYMBOL Opamps\\ADA4891 -432 -176 R0
SYMATTR InstName U6
SYMBOL cap -464 -336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 47µ
SYMBOL res -160 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 0.001
SYMBOL Misc\\NE555 -432 -1280 R0
SYMATTR InstName U7
SYMBOL voltage -272 -1520 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 3.3
SYMBOL res -192 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 0.001
SYMBOL schottky 704 -1312 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 544 -1248 R0
SYMATTR InstName D6
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 816 -1264 R0
SYMATTR InstName C12
SYMATTR Value 47µ
SYMBOL cap 512 -1312 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 47µ
SYMBOL res 928 -1280 R0
SYMATTR InstName R22
SYMATTR Value 50
SYMBOL res 400 -1184 R0
SYMATTR InstName R23
SYMATTR Value 1000Meg
SYMBOL res 352 -1312 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 0.001
SYMBOL cap -272 -1168 R0
SYMATTR InstName C14
SYMATTR Value 100n
SYMBOL res -176 -1472 R0
SYMATTR InstName R25
SYMATTR Value 680
SYMBOL res -176 -1360 R0
SYMATTR InstName R26
SYMATTR Value 330
SYMBOL cap -320 -992 R0
SYMATTR InstName C15
SYMATTR Value 100n
TEXT -1016 1200 Left 2 !.tran 0 10m 0 5u startup

Version 4
SHEET 1 3440 3092
WIRE 2128 960 1888 960
WIRE 2128 1040 2128 960
WIRE -1200 1168 -1200 1136
WIRE -1392 1184 -1392 1152
WIRE 2128 1184 2128 1120
WIRE 64 1200 -176 1200
WIRE 1312 1200 1088 1200
WIRE 1888 1264 1888 960
WIRE -96 1312 -96 1280
WIRE 1168 1312 1168 1280
WIRE -1200 1328 -1200 1248
WIRE -176 1328 -176 1200
WIRE -128 1328 -176 1328
WIRE 1088 1328 1088 1200
WIRE 1136 1328 1088 1328
WIRE 64 1344 64 1200
WIRE 64 1344 -64 1344
WIRE 1312 1344 1312 1200
WIRE 1312 1344 1200 1344
WIRE 1408 1344 1312 1344
WIRE 1456 1344 1408 1344
WIRE 1568 1344 1536 1344
WIRE 1616 1344 1568 1344
WIRE 1840 1344 1696 1344
WIRE -480 1360 -688 1360
WIRE -320 1360 -400 1360
WIRE -128 1360 -320 1360
WIRE 592 1360 592 1328
WIRE 880 1360 752 1360
WIRE 1008 1360 960 1360
WIRE 1136 1360 1008 1360
WIRE 64 1376 64 1344
WIRE 224 1376 64 1376
WIRE 352 1376 304 1376
WIRE 560 1376 352 1376
WIRE 704 1392 624 1392
WIRE 752 1392 752 1360
WIRE 752 1392 704 1392
WIRE 1408 1392 1408 1344
WIRE 1568 1392 1568 1344
WIRE -688 1408 -688 1360
WIRE -320 1408 -320 1360
WIRE -96 1408 -96 1376
WIRE 560 1408 528 1408
WIRE 1008 1408 1008 1360
WIRE 1168 1408 1168 1376
WIRE 1888 1408 1888 1360
WIRE 352 1424 352 1376
WIRE 592 1456 592 1424
WIRE 704 1456 704 1392
WIRE 1568 1504 1568 1456
WIRE -688 1520 -688 1488
WIRE -320 1520 -320 1472
WIRE 1008 1520 1008 1472
WIRE 1408 1520 1408 1472
WIRE 352 1536 352 1488
WIRE 1888 1536 1888 1488
WIRE 528 1552 528 1408
WIRE 704 1552 704 1536
WIRE 704 1552 528 1552
WIRE 704 1584 704 1552
WIRE 704 1712 704 1664
WIRE 2128 1856 1888 1856
WIRE 2128 1936 2128 1856
WIRE 2128 2080 2128 2016
WIRE 1312 2096 1088 2096
WIRE 1888 2160 1888 1856
WIRE 1168 2208 1168 2176
WIRE 672 2224 672 2192
WIRE 1088 2224 1088 2096
WIRE 1136 2224 1088 2224
WIRE 640 2240 480 2240
WIRE 1312 2240 1312 2096
WIRE 1312 2240 1200 2240
WIRE 1408 2240 1312 2240
WIRE 1456 2240 1408 2240
WIRE 1568 2240 1536 2240
WIRE 1616 2240 1568 2240
WIRE 1840 2240 1696 2240
WIRE 832 2256 704 2256
WIRE 960 2256 912 2256
WIRE 1136 2256 960 2256
WIRE 640 2272 544 2272
WIRE 1408 2288 1408 2240
WIRE 1568 2288 1568 2240
WIRE 96 2304 96 2256
WIRE 960 2304 960 2256
WIRE 1168 2304 1168 2272
WIRE 544 2320 544 2272
WIRE 672 2320 672 2288
WIRE 1568 2400 1568 2352
WIRE 960 2416 960 2368
WIRE 1408 2416 1408 2368
WIRE 480 2496 480 2240
WIRE 832 2496 480 2496
WIRE 1888 2496 1888 2256
WIRE 1888 2496 912 2496
WIRE 1888 2576 1888 2496
WIRE 1888 2608 1888 2576
WIRE 1888 2736 1888 2688
WIRE 96 2928 96 2880
FLAG -1200 1328 0
FLAG -1200 1136 Vcc
FLAG -688 1520 0
FLAG -320 1520 0
FLAG 352 1536 0
FLAG 1312 1200 out5
FLAG 1008 1520 0
FLAG 1168 1280 Vcc
FLAG 1888 1536 0
FLAG 2128 1184 0
FLAG 1408 1520 0
FLAG 1568 1504 0
FLAG 592 1456 Vcc
FLAG 592 1328 Vss
FLAG 1168 1408 Vss
FLAG -1392 1184 0
FLAG -1392 1152 Vss
FLAG 704 1712 0
FLAG -96 1280 Vcc
FLAG -96 1408 Vss
FLAG 1168 2176 Vcc
FLAG 1888 2736 0
FLAG 2128 2080 0
FLAG 1408 2416 0
FLAG 1568 2400 0
FLAG 1168 2304 Vss
FLAG 96 2928 0
FLAG 1888 2576 I_out
FLAG 96 2384 0
FLAG 672 2192 Vcc
FLAG 672 2320 Vss
FLAG 544 2400 0
FLAG 960 2416 0
SYMBOL voltage -1200 1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -688 1392 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -62 180 Left 2
SYMATTR Value PULSE(0 3.3 0 0 0 0.015m 0.02m)
SYMATTR InstName V3
SYMBOL res -384 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 320 1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap -336 1408 R0
SYMATTR InstName C3
SYMATTR Value 47n
SYMBOL cap 336 1424 R0
SYMATTR InstName C4
SYMATTR Value 47n
SYMBOL Opamps\\ADA4891 592 1456 M180
SYMATTR InstName U4
SYMBOL res 976 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap 992 1408 R0
SYMATTR InstName C1
SYMATTR Value 47n
SYMBOL Opamps\\ADA4891 1168 1280 R0
SYMATTR InstName U1
SYMBOL nmos 1840 1264 R0
SYMATTR InstName M1
SYMATTR Value IRFH7936
SYMBOL res 1872 1392 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMATTR SpiceLine pwr=10
SYMBOL voltage 2128 1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 1392 1376 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 1712 1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 47
SYMBOL cap 1552 1392 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res 1552 1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 47
SYMBOL res 688 1440 R0
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL res 688 1568 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL Opamps\\ADA4891 -96 1280 R0
SYMATTR InstName U2
SYMBOL Opamps\\ADA4891 1168 2176 R0
SYMATTR InstName U3
SYMBOL nmos 1840 2160 R0
SYMATTR InstName M2
SYMATTR Value IRFH7936
SYMBOL res 1872 2592 R0
SYMATTR InstName R10
SYMATTR Value 1
SYMATTR SpiceLine pwr=10
SYMBOL voltage 2128 1920 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL res 1392 2272 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 1712 2224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 47
SYMBOL cap 1552 2288 R0
SYMATTR InstName C5
SYMATTR Value 10n
SYMBOL res 1552 2224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 47
SYMBOL voltage 96 2784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PWL(0 0 1m 0 1.01m 2 2m 2 2.01m 5 3m 5 7m 10 7.01m 0 8m 0 8.01m 10 8.5m 10 8.51m 0 9m 0 10m 2)
SYMBOL bv 96 2288 R0
SYMATTR InstName B2
SYMATTR Value V=10-V(I_out)
SYMBOL Opamps\\ADA4891 672 2192 R0
SYMATTR InstName U5
SYMBOL voltage 544 2304 R0
SYMATTR InstName V6
SYMATTR Value 1
SYMBOL res 928 2240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL cap 944 2304 R0
SYMATTR InstName C6
SYMATTR Value 10n
SYMBOL res 928 2480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1k
TEXT -1016 1200 Left 2 !.tran 0 10m 0 5u startup
